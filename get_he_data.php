<?php

require('ASListHandler.php');

ini_set("max_execution_time", 2000);

// get list of countries
$country_list = array(
'AF',
'EG',
'AX',
'AL',
'DZ',
'AS',
'VI',
'AD',
'AO',
'AI',
'AQ',
'AG',
'GQ',
'AR',
'AM',
'AW',
'AC',
'AZ',
'ET',
'AU',
'BS',
'BH',
'BD',
'BB',
'BY',
'BE',
'BZ',
'BJ',
'BM',
'BT',
'BO',
'BQ',
'BA',
'BW',
'BV',
'BR',
'VG',
'IO',
'BN',
'BG',
'BF',
'BU',
'BI',
'EA',
'CL',
'CN',
'CP',
'CK',
'CR',
'CI',
'CW',
'DK',
'DD',
'DE',
'DG',
'DM',
'DO',
'DJ',
'EC',
'SV',
'ER',
'EE',
'CE',
'EU',
'FK',
'FO',
'FJ',
'FI',
'FR',
'FX',
'GF',
'PF',
'TF',
'GA',
'GM',
'GE',
'GH',
'GI',
'GD',
'GR',
'GL',
'GP',
'GU',
'GT',
'GG',
'GN',
'GW',
'GY',
'HT',
'HM',
'HN',
'HK',
'IN',
'ID',
'IM',
'IQ',
'IR',
'IE',
'IS',
'IL',
'IT',
'JM',
'JP',
'YE',
'JE',
'JO',
'YU',
'KY',
'KH',
'CM',
'CA',
'IC',
'CV',
'KZ',
'QA',
'KE',
'KG',
'KI',
'CC',
'CO',
'KM',
'CD',
'CG',
'KP',
'KR',
'HR',
'CU',
'KW',
'LA',
'LS',
'LV',
'LB',
'LR',
'LY',
'LI',
'LT',
'LU',
'MO',
'MG',
'MW',
'MY',
'MV',
'ML',
'MT',
'MA',
'MH',
'MQ',
'MR',
'MU',
'YT',
'MK',
'MX',
'FM',
'MD',
'MC',
'MN',
'ME',
'MS',
'MZ',
'MM',
'NA',
'NR',
'NP',
'NC',
'NZ',
'NT',
'NI',
'NL',
'AN',
'NE',
'NG',
'NU',
'MP',
'NF',
'NO',
'OM',
'AT',
'TL',
'PK',
'PS',
'PW',
'PA',
'PG',
'PY',
'PE',
'PH',
'PN',
'PL',
'PT',
'PR',
'RE',
'RW',
'RO',
'RU',
'SB',
'BL',
'MF',
'ZM',
'WS',
'SM',
'ST',
'SA',
'SE',
'CH',
'SN',
'RS',
'CS',
'SC',
'SL',
'ZW',
'SG',
'SX',
'SK',
'SI',
'SO',
'ES',
'LK',
'SH',
'KN',
'LC',
'PM',
'VC',
'ZA',
'SD',
'GS',
'SS',
'SR',
'SJ',
'SZ',
'SY',
'TJ',
'TW',
'TZ',
'TH',
'TG',
'TK',
'TO',
'TT',
'TA',
'TD',
'CZ',
'CS',
'TN',
'TR',
'TM',
'TC',
'TV',
'SU',
'UG',
'UA',
'HU',
'UM',
'UY',
'UZ',
'VU',
'VA',
'VE',
'AE',
'US',
'GB',
'VN',
'WF',
'CX',
'EH',
'ZR',
'CF',
'CY');

/*
        $link = CheckrouteDatabase::connect();
        $stmt = mysqli_prepare($link, "SELECT code FROM Country");
        if ($stmt) {
            mysqli_stmt_bind_param($stmt, "s", $id);
            mysqli_stmt_execute($stmt);
            mysqli_stmt_bind_result($stmt, $result);

            $measurements_of_campaign = array();
            while (mysqli_stmt_fetch($stmt)) {
                $measurements_of_campaign[] = $result;
            }
            mysqli_stmt_close($stmt);
        }
        mysqli_close($link);
*/

/*
foreach ($country_list as $country) {
    $myarray = ASListHandler::get_country_data_hurricane_electric($country);
    if ($myarray != NULL) {
        ASListHandler::write_as_list_to_db($myarray, 'HE');
        echo 'Successfully wrote date for country ' . $country . ' to database.<br/>';
    } else {
        echo 'No information found for country ' . $country . '.<br/>';    
    }
}
*/

/*
$mydata = ASListHandler::get_as_data_maxmind();

// duplikate herausfiltern
$as_list = array();
foreach ($mydata as $val) {
    $as_list[$val['number']] = $val;
}

ASListHandler::write_as_list_to_db($as_list, 'Maxmind');
*/

$cidr_data = ASListHandler::get_as_data_cidr();
ASListHandler::write_as_list_to_db($cidr_data, 'CIDR');

?>